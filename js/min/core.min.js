
;var domEl,tempsNames,urlsApi;domEl={_currency_h:".currency-h",_percentage_d:".percentage-d",_real_v:".real-v",_rst_element:".rst-element",btn_test_api_clean:"button#test-api-clean",btn_test_api_save:"button#test-api-save",btn_test_remote_clean:"button#test-remote-clean",btn_test_remote_save:"button#test-remote-save",div_inputs_session:"div#hidden-inputs-session",div_inputs_temporal:"div#hidden-inputs-temporal",div_recurrent:"div#content_temporal_interactive",form_test_api:"form#test-api",form_test_remote:"form#test-remote",input_session_usr_id:"input#session-usr-id",input_session_usr_type:"input#session-usr-type",input_test_api_comment:"input#test-api-comment",input_test_api_element:"input.test-api-element",input_test_api_email:"input#test-api-email",input_test_api_input:"input.test-api-input",input_test_api_lastname:"input#test-api-lastname",input_test_api_name:"input#test-api-name",input_test_api_phone:"input#test-api-phone",input_test_api_product:"input#test-api-product",input_test_remote_comment:"input#test-remote-comment",input_test_remote_element:"input.test-remote-element",input_test_remote_email:"input#test-remote-email",input_test_remote_input:"input.test-remote-input",input_test_remote_lastname:"input#test-remote-lastname",input_test_remote_name:"input#test-remote-name",input_test_remote_phone:"input#test-remote-phone",input_test_remote_product:"input#test-remote-product"},tempsNames={test_api_form:"temp_test_api_form",test_remote_form:"temp_test_remote_form"},urlsApi={test_api:"../api/v1/test/api",test_remote:"../api/v1/test/remote"};
function validateEmail(e){return!0}function resetAlert(){alertify.set({labels:{ok:"OK",cancel:"Cancel"},delay:5e3,buttonReverse:!1,buttonFocus:"ok"})}var testApiMethod={testApi:function(){var e,t;e=$(domEl.form_test_api).serializeFormJSON(),console.log(e),t=MAXT.renameArrayObjKeys([e],{lastname:"apellido",comment:"comentarios",name:"nombre",email:"correo",product:"producto",phone:"telefono"}),t=t[0],console.log(t),t.web_max="medigraf.com.mx",t.news="1",t.business_max="0",t.origen_type="2",t.exit_web="http://google.com",t.campaign_max="Capaña de prueba",console.log(t)},fillingControl:function(){var e,t,n;e=["name","lastname","email","phone","product","comment"],t=$(domEl.form_test_api).serializeFormJSON(),console.log(t),n=MAXT.validFormFull(t,e),n=!0,$(domEl.btn_test_api_save).attr("disabled",!n),isEmpty=MAXT.validFormEmpty(t,e),$(domEl.btn_test_api_clean).attr("disabled",isEmpty)},resetTestApi:function(){MAXT.resetForm(domEl.form_test_api)},keyupInput:function(e){testApiMethod.fillingControl()},clickSave:function(e){resetAlert(),alertify.set({labels:{ok:"Aceptar",cancel:"Cancelar"}}),alertify.confirm("¿Seguro que desea guardar?",function(e){if(e){var t;t=testApiMethod.testApi(),t.success(function(e){console.log(e),testApiMethod.resetTestApi(),testApiMethod.fillingControl(),alertify.success("Test api agregado.")}),t.error(function(e){console.log(e),alertify.error("No se ha podido agregar el Test api <br /> Inténtelo más tarde.")})}})},clickClean:function(e){testApiMethod.resetTestApi(),testApiMethod.fillingControl()}},testRemoteMethod={testRemote:function(){var e;return e=$(domEl.form_test_remote).serializeFormJSON(),e.web_max="medigraf.com.mx",e.news="1",e.business_max="0",e.origen_type="2",e.exit_web="http://google.com",e.campaign_max="Capaña de prueba",MAXT.postalService("http://max-app.net/remote.php",e)},fillingControl:function(){var e,t,n;e=["name","lastname","email","phone","product","comment"],t=$(domEl.form_test_remote).serializeFormJSON(),n=MAXT.validFormFull(t,e),$(domEl.btn_test_remote_save).attr("disabled",!n),isEmpty=MAXT.validFormEmpty(t,e),$(domEl.btn_test_remote_clean).attr("disabled",isEmpty)},resetTestRemote:function(){MAXT.resetForm(domEl.form_test_remote)},keyupInput:function(e){testRemoteMethod.fillingControl()},clickSave:function(e){resetAlert(),alertify.set({labels:{ok:"Aceptar",cancel:"Cancelar"}}),alertify.confirm("¿Seguro que desea guardar?",function(e){if(e){var t;t=testRemoteMethod.testRemote(),t.success(function(e){console.log(e),testRemoteMethod.resetTestRemote(),testRemoteMethod.fillingControl(),alertify.success("Test Remote agregado.")}),t.error(function(e){console.log(e),alertify.error("No se ha podido agregar el Test Remote <br /> Inténtelo más tarde.")})}})},clickClean:function(e){testRemoteMethod.resetTestRemote(),testRemoteMethod.fillingControl()}},domElementsFormatMethods={numberReal:function(e){var t,n;return t=+e,t=t.toFixed(2),n=t.split("."),1===n.length?n[1]="00":n=n,t=n.join("."),t=+t,t=t.toFixed(2)},valueNumberReal:function(e){$(e).each(function(e){var t,n;t=MAXT.getValue($(this)),n=domElementsFormatMethods.numberReal(t),MAXT.setValue($(this),n)})},htmlNumberReal:function(e){$(e).each(function(e){var t,n;t=MAXT.getHTML($(this)),n=domElementsFormatMethods.numberReal(t),MAXT.setHTML($(this),n)})},currency:function(e){var t;return t=e,t=MAXT.currencyFormat(t)},valueCurrency:function(e){$(e).each(function(e){var t,n;t=MAXT.getValue($(this)),n=domElementsFormatMethods.currency(t),MAXT.setValue($(this),n)})},htmlCurrency:function(e){$(e).each(function(e){var t,n;t=MAXT.getHTML($(this)),n=domElementsFormatMethods.currency(t),MAXT.setHTML($(this),n)})},percentageDecimal:function(e){var t;return t=+e,t*=100,t=t.toFixed(2),t+="%"},valuePercentageDecimal:function(e){$(e).each(function(e){var t,n;t=MAXT.getValue($(this)),n=domElementsFormatMethods.percentageDecimal(t),MAXT.setValue($(this),n)})},htmlPercentageDecimal:function(e){$(e).each(function(e){var t,n;t=MAXT.getHTML($(this)),n=domElementsFormatMethods.percentageDecimal(t),MAXT.setHTML($(this),n)})},dateRoman:function(e,t){var n,a;return n=MAXT.momentToRoman(e,t),a=n.split(","),n=a[1],n=$.trim(n),a=n.split(" "),a.splice(2,1),n=a.join(" de ")},valueDateRoman:function(e){$(e).each(function(e){var t,n;t=MAXT.getValue($(this)),n=domElementsFormatMethods.dateRoman(t,"es"),MAXT.setValue($(this),n)})},htmlDateRoman:function(e){$(e).each(function(e){var t,n;t=MAXT.getHTML($(this)),n=domElementsFormatMethods.dateRoman(t,"es"),MAXT.setHTML($(this),n)})},dateHuman:function(e,t){var n;return n=MAXT.momentToHuman(e,t)},valueDateHuman:function(e){$(e).each(function(e){var t,n;t=MAXT.getValue($(this)),n=domElementsFormatMethods.dateHuman(t,"es"),MAXT.setValue($(this),n)})},htmlDateHuman:function(e){$(e).each(function(e){var t,n;t=MAXT.getHTML($(this)),n=domElementsFormatMethods.dateHuman(t,"es"),MAXT.setHTML($(this),n)})},ucWords:function(e){$(e).each(function(e){var t,n;t=MAXT.getHTML($(this)),n=MAXT.ucWords(t),MAXT.setHTML($(this),n)})}},inputValMetdods={isIntegerKP:function(e){var t,n,a,r,o,i;t=e.keyCode||e.which,a=String.fromCharCode(t),n="0123456789",r=[8,9,37,38,39,40,46],o=!1;for(i in r)t==r[i]&&(o=!0);return-1!=n.indexOf(a)||o?void 0:!1},isDecimalKP:function(e){var t,n;return n=$(this).val(),t=e.keyCode?e.keyCode:e.which,8==t?!0:t>47&&58>t?""==n?!0:(regexp=/.[0-9]{15}$/,!regexp.test(n)):46==t?""==n?!1:(regexp=/^[0-9]+$/,regexp.test(n)):!1},roundDecimalBlur:function(e){var t;t=$(this).val(),t=MAXT.roundNDecimalFormat(t,2),$(this).val(t)}};
var MAXT={};MAXT=function(){function e(e,t){return moment.lang(t),moment(e).format("dddd[,] LL")}function t(e,t){return moment.lang(t),moment(e,"YYYY-MM-DD hh:mm:ss").fromNow(!0)}function n(e,t,n,a){var r,o,i;for(r=1;31>=r;r++)o=10>r?"0"+r:r,i=$(e),i.hasClass(t)&&(selecet_day_attr={$dataElement:o},v(i,a,selecet_day_attr,o,1))}function a(e,t,n,a){var r,o,i,s;for(r=1;12>=r;r++){switch(13>r&&(o="0"+r),o){case"01":i="Enero";break;case"02":i="Febrero";break;case"03":i="Marzo";break;case"04":i="Abril";break;case"05":i="Mayo";break;case"06":i="Junio";break;case"07":i="Julio";break;case"08":i="Agosto";break;case"09":i="Septiembre";break;case"010":i="Octubre";break;case"011":i="Noviembre";break;case"012":i="Diciembre"}s=$(e),s.hasClass(t)&&(selectmonth_attr={$dataElement:o},v(s,a,selectmonth_attr,i,1))}}function r(e,t,n,a){var r,o,i,s;for(f=new Date,r=f.getFullYear(),o=55,i=18,s=r-o;r-i>=s;s++)year=$(e),year.hasClass(t)&&(select_year_attr={$dataElement:s},v(year,a,select_year_attr,s,1))}function o(e,t){var n=Handlebars.templates[e];return t?n(t):n}function i(e,t,n){$(t).html(o(e,n))}function s(e){return $(e).val()}function l(e,t){$(e).val(t)}function u(e){return $(e).val()?!0:!1}function m(e){return $(e).length>0?!0:!1}function c(e){var t,n;t=$(e).val(),n=$.trim(t),$(e).val(n)}function d(e){return $(e).html()}function p(e,t){$(e).html(t)}function h(e){var t,n;t=$(e).val(),n=hex_sha512(t),$(e).val(n)}function v(e,t,n,a,r){var o;o="<"+t;for(var i in n)o+=n.hasOwnProperty(i)?" "+i+"='"+n[i]+"'":"";r?(o+=">",o+=a,o+="</"+t+">"):(o+=" >",o+=a),$(e).append(o)}function M(e,t){for(var n=0;n<t.length;n++)v(e,t[n][0],t[n][1],t[n][2],t[n][3])}function g(e,t,n,a,r){var o;o="<"+t;for(var i in n)o+=n.hasOwnProperty(i)?" "+i+"='"+n[i]+"'":"";r?(o+=">",o+=a,o+="</"+t+">"):(o+=" />",o+=a),$(e).prepend(o)}function b(e,t){for(var n=0;n<t.length;n++)g(e,t[n][0],t[n][1],t[n][2],t[n][3])}function y(e,t,n){var a,r,o,i,s,l;switch(a=new Date,r=new Date(a),r.setDate(a.getDate()+t),o=r.getFullYear(),i=+r.getMonth(),i+=1,s=r.getDate(),l=o+"-"+i+"-"+(+s+1),$(e).datetimepicker({pickTime:!1}),n){case 0:$(e).data("DateTimePicker").setDate(l);break;case 1:$(e).data("DateTimePicker").setMinDate(r),$(e).data("DateTimePicker").setDate(l);break;case 2:$(e).data("DateTimePicker").setMinDate(r)}}function T(e,t){var n;for(var a in e)e[a]=$.trim(e[a]);return n=_.size(_.compact(_.pick(e,t))),n===t.length?!0:!1}function A(e,t){var n;for(var a in e)e[a]=$.trim(e[a]);return n=_.size(_.compact(_.pick(e,t))),n?!1:!0}function E(e){$(e).each(function(){this.reset()})}function k(e,t){return $.ajax({type:"POST",contentType:"application/json",url:e,dataType:"json",data:JSON.stringify(t)})}function F(e){var t;return t=function(){var t=null;return $.ajax({async:!1,global:!1,url:e,dataType:"json"}).done(function(e){t=e}),t}()}function D(e,t,n){var a,r,o,i;return a=e,r=t,n=$(a).serializeFormJSON(),o=r,n,i=k(o)}function w(e,t){return"object"==typeof e?e.hasOwnProperty(t):!1}function L(e,t,n,a){return _.filter(_.pluck(e,t),function(e){return a?e===n:e!==n})}function X(e,t){return _.reduce(_.pluck(e,t),function(e,t){return+e+ +t})}function x(e,t){var n,a;return a=e.length,n=X(e,t),n/a}function O(e,t){var n,a;n=[],a=_.pairs(t);for(var r=0;r<e.length;r++)for(n[r]={},j=0;j<a.length;j++)n[r][a[j][0]]=e[r][a[j][1]];return n}function R(e,t){var n,a;do n=e.length,e=_.without(e,_.findWhere(e,t)),a=e.length;while(n!==a);return e}function C(e,t){pairs=_.pairs(t),withoutArrayObj=[];for(var n=0;n<pairs.length;n++)withoutArrayObj[n]=new Object,withoutArrayObj[n][pairs[n][0]]=pairs[n][1];for(n=0;n<withoutArrayObj.length;n++)e=R(e,withoutArrayObj[n]);return e}function H(e){var t;return t=accounting.formatMoney(e)}function N(e,t){var n,a,r,o,i,s;if(s=NaN,!isNaN(e)){if(e=""+e,n=e.split("."),a=n[0],r="0",2===n.length)for(r=n[1],i=Math.pow(10,r.length-t),o=+r/i,r=Math.ceil(o),r=""+r,idx=0;idx<t-r.length;idx++)r="0"+r;s=a+"."+r,s=+s,s=s.toFixed(t)}return s}function S(e,t,n){return expReg=new RegExp(t,"g"),e.replace(expReg,n)}function Y(e){var t,n,a,r;for(t=e.split(" "),a=t.length,n="",r=0;a>r;r++)r!=a-1?n=n+V(t[r])+" ":n+=V(t[r]);return n}function V(e){return e.substr(0,1).toUpperCase()+e.substr(1,e.length).toLowerCase()}function J(e){var t,n;return t=$.trim(e),n=t.split(" "),n=_.without(n,""),t=n.join(" "),t=$.trim(t)}function P(e,t,n,a){"use strict";$(e).fileupload({url:n,dataType:"json",done:function(e,t){var n,r;r=t.result.files,n=k(a,r),n.success(function(e){$.each(r,function(e,t){$("<p/>").text(t.name).appendTo("#files")})})},progressall:function(e,n){var a=parseInt(n.loaded/n.total*100,10);$(t).css("width",a+"%","background-color","#5cb85c")}})}function z(e){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",n=4,a="",r=0;n>r;r++){var o=Math.floor(Math.random()*t.length);a+=t.substring(o,o+1)}$(e).val(a)}return moment.lang("es",{months:"Enero_Febrero_Marzo_Abril_Mayo_Junio_Julio_Agosto_Septiembre_Octubre_Noviembre_Diciembre".split("_"),monthsShort:"ene._feb._mar_abr._may_jun_jul._ago_sep._oct._nov._dic.".split("_"),weekdays:"Domingo_Lunes_Martes_Miércoles_Jueves_Viernes_Sábado".split("_"),weekdaysShort:"dom._lun._mar._mier._juev._vie._sab.".split("_"),weekdaysMin:"Do_Lu_Ma_Mi_Ju_Vi_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Hoy a las] LT",nextDay:"[Mañanaalas]LT",nextWeek:"dddd[a]LT",lastDay:"[Ayera]LT",lastWeek:"dddd[hasta]LT",sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d dias",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinal:function(e){returnnumber+(1===e?"er":"a")},week:{dow:1,doy:6}}),{momentToHuman:t,momentToRoman:e,selectDay:n,selectMonth:a,selectYear:r,getTemplate:o,loadTemplate:i,getValue:s,setValue:l,exist:u,existInDOM:m,getHTML:d,setHTML:p,appendOne:v,appendMulti:M,prependOne:g,prependMulti:b,trimValue:c,cryptElement:h,setDateTPCalendar:y,validFormFull:T,validFormEmpty:A,resetForm:E,postalService:k,getInternalJSON:F,getSerializeFormJSON:D,hasOwnPropertyOptimized:w,filterArrayObjByKey:L,sumArrayObjByKey:X,avgArrayObjByKey:x,renameArrayObjKeys:O,withoutArrayObjAND:R,withoutArrayObjOR:C,currencyFormat:H,roundNDecimalFormat:N,advancedTrim:J,replaceAll:S,ucWords:Y,ucFirst:V,picturesLoader:P,randomString:z}}();
Finch.route("/",{setup:function(e){},load:function(e){},unload:function(e){MAXT.setHTML(domEl.div_recurrent,"")}}),Finch.route("test/api",{setup:function(e){},load:function(e){MAXT.loadTemplate(tempsNames.test_api_form,domEl.div_recurrent),$(domEl.btn_test_api_save).attr("disabled",!0),$(domEl.btn_test_api_clean).attr("disabled",!0)},unload:function(e){MAXT.setHTML(domEl.div_recurrent,"")}}),Finch.route("test/remote",{setup:function(e){},load:function(e){MAXT.loadTemplate(tempsNames.test_remote_form,domEl.div_recurrent),$(domEl.btn_test_remote_save).attr("disabled",!0),$(domEl.btn_test_remote_clean).attr("disabled",!0)},unload:function(e){MAXT.setHTML(domEl.div_recurrent,"")}}),Finch.listen();
$(document).ready(function(){$.fn.serializeFormJSON=function(){var e={},t=this.serializeArray();return $.each(t,function(){e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},Number.prototype.format=function(e,t){var n="(\\d)(?=(\\d{"+(t||3)+"}) + "+(e>0?"\\.":"$")+")";return this.toFixed(Math.max(0,~~e)).replace(new RegExp(n,"g"),"$1,")},$(domEl.div_recurrent).on("click",".panel .tools .fa",function(){var e,t;e=100,t=$(this).parents(".panel").children(".panel-body"),$(this).hasClass("fa-chevron-down")?($(this).removeClass("fa-chevron-down").addClass("fa-chevron-up"),t.slideUp(e)):($(this).removeClass("fa-chevron-up").addClass("fa-chevron-down"),t.slideDown(e))}),$(domEl.div_recurrent).on("keyup",domEl.input_test_api_input,testApiMethod.keyupInput),$(domEl.div_recurrent).on("click",domEl.btn_test_api_save,testApiMethod.clickSave),$(domEl.div_recurrent).on("click",domEl.btn_test_api_clean,testApiMethod.clickClean),$(domEl.div_recurrent).on("keyup",domEl.input_test_remote_input,testRemoteMethod.keyupInput),$(domEl.div_recurrent).on("click",domEl.btn_test_remote_save,testRemoteMethod.clickSave),$(domEl.div_recurrent).on("click",domEl.btn_test_remote_clean,testRemoteMethod.clickClean)});
